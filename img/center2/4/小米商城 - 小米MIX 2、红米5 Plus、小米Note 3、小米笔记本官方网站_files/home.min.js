!function(t){function e(a){if(i[a])return i[a].exports;var s=i[a]={exports:{},id:a,loaded:!1};return t[a].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){function a(){return Math.random()>.5?-1:1}function s(t,e){var i,a,n,o,r,l,d,c,g,u,p,m;if(t.length>1)return t.each(function(){s($(this),e)}),this;if(!bricksData.hasOwnProperty(t.attr("id")))return this;if(n={onLoad:$.noop},o=$.extend({},n,e),m=t.attr("id"),r=bricksData[m],i=t.find(".J_brickBd"),a=t.find(".J_brickNav"),l=r.left.length>1?x.promoTemplateMiddle:x.promoTemplateLarge,u='<div class="span4 span-first"><ul class="brick-promo-list clearfix">'+l(r.left)+"</ul></div>",p="",r.right.length>1){p='<div class="span16"><div id="'+(t.attr("id")+"-content")+'" class="tab-container">',g='<ul class="tab-list J_brickTabSwitch" data-tab-target="'+(t.attr("id")+"-content")+'">',("smart"===m||"homeelec"===m)&&$.each(r.right,function(t,e){$.each(e.items,function(t,e){e.sectionName="smart"})});for(var h=0,f=r.right.length;f>h;h+=1){var v=r.right[h].items;d=x.itemTemplateMiddle1,c=x.itemTemplateSmall,p+='<ul class="brick-list tab-content clearfix'+(0===h?" tab-content-active J_recommendActive":" tab-content-hide")+'">'+d(v.splice(0,v.length-1))+c(v)+'<li class="brick-item brick-item-s"><div class="figure figure-more"><a href="'+r.right[h].area_url+'" target="_blank"><i class="iconfont">&#xe615;</i></a></div><a class="more" href="'+r.right[h].area_url+'" target="_blank">浏览更多<small>'+r.right[h].area_title+"</small></a></li></ul>",g+="<li"+(0===h?' class="tab-active"':"")+">"+r.right[h].area_title+"</li>"}g+="</ul>",p+="</div></div>"}else d=x.itemTemplateMiddle2,g='<a class="more-link" href="'+r.right[0].area_url+'" target="_blank">查看全部<i class="iconfont">&#xe623;</i></a>',p='<div class="span16"><ul class="brick-list clearfix">'+d(r.right[0].items)+"</ul></div>";a.html(g),i.html('<div class="row">'+u+p+"</div>"),o.onLoad(t)}function n(t,e,i){var a=t.find("a"),s=function(t){try{return t.replace(/\s/g,"")}catch(e){return t}};$.each(a,function(t,a){var n=$(a).attr("data-stat-index"),o=s($(a).attr("data-stat-text")),r=$(a).attr("data-stat-method"),l="stat_"+e+"."+i+"_"+n+"_"+r;$(a).attr({"data-stat-pid":l,"data-stat-aid":o})})}function o(t,e){var i=t.attr("id"),a={v:1,data:e.data,morelink:_[i].morelink,itemSite:MI.GLOBAL_CONFIG.itemSite},s=x.itemTemplateRecommend,o=t.find(".J_recommendActive");o.html(s(a));var r=t.find("h2.title").text()||t.attr("data-stat-title");n(o,"首页",r+"热门"),window.xmstLittle&&xmstLittle.isFunction(xmstLittle.fn.linkSign)&&xmstLittle(o[0]).linkSign();var l="re-首页."+_[i].name;$.force_appear(),t.appear(),t.one("appear",function(){if("undefined"!=typeof _msq&&_msq.push(["trackPanelShow",i,l]),!t.data("log_codes")){for(var e=t.find(".brick-item").find(".figure-img a"),a="",s=0,n=e.length;n>s;s++)a+=e.eq(s).data("log_code")+";";t.attr("data-log_codes",a.substring(0,a.length-1))}}),t.find(".brick-item").on({mouseenter:function(){$(this).addClass("brick-item-active")},mouseleave:function(){$(this).removeClass("brick-item-active")}})}function r(t){var e=t.attr("id"),i="recommend_home_"+e,a=_[e].api;$.ajax({dataType:"JSONP",url:a,jsonpCallback:i,cache:!0,success:function(e){null!==o&&"function"==typeof o&&o(t,e)}})}function l(t,e){var i,s,n,o,r,d,c;return t.length>1?(t.each(function(){l($(this),e)}),this):bricksData.hasOwnProperty(t.attr("id"))?(s={onLoad:$.noop},n=$.extend({},s,e),o=bricksData[t.attr("id")],i=t.find(".J_brickBd"),r=x.itemTemplateReview,c=o.sort(a).splice(0,4),d='<ul class="review-list clearfix">'+r(c)+"</ul>",i.html(d),void n.onLoad(t)):this}function d(t,e){function i(t){var e={book:{title:"图书",style:"orange",image:MI.GLOBAL_CONFIG.assetsSite+"/i/index/more-duokan.jpg",url:"http://www.duokan.com/list/1-1?from=xiaomi",desc:"海量好书，享受精品阅读时光<br />漂亮的中文排版，千万读者选择！",text:"多看阅读"},theme:{title:"MIUI 主题",style:"green",image:MI.GLOBAL_CONFIG.assetsSite+"/i/index/more-miui.jpg",url:"http://zhuti.xiaomi.com/?from=mi",desc:"众多个性主题、百变锁屏与自由桌面<br />让你的手机与众不同！",text:"MIUI主题市场"},game:{title:"游戏",style:"red",image:MI.GLOBAL_CONFIG.assetsSite+"/i/index/more-game.jpg",url:"http://game.xiaomi.com/index.php?c=index&a=run",desc:"免费下载海量的手机游戏<br />天天都有现金福利赠送",text:"小米游戏商店"},app:{title:"应用",style:"ocean",image:MI.GLOBAL_CONFIG.assetsSite+"/i/index/more-app.jpg",url:"http://app.mi.com/?from=mi",desc:"帮助小米手机和其他安卓手机用户<br />发现好用的安卓应用",text:"小米应用商店"}},i=x.itemTemplateContent,a=x.itemTemplateContentMore;return'<li class="content-item content-item-'+t+("book"===t?" content-item-first":"")+'"><h2 class="title">'+e[t].title+'</h2><ul class="item-list clearfix">'+i(o[t])+a(e[t])+"</ul></li>"}var a,s,n,o,r;return t.length>1?(t.each(function(){d($(this),e)}),this):bricksData.hasOwnProperty(t.attr("id"))?(s={onLoad:$.noop},n=$.extend({},s,e),o=bricksData[t.attr("id")],a=t.find(".J_brickBd"),r='<ul class="content-list clearfix">'+i("book")+i("theme")+i("game")+i("app")+"</ul>",a.html(r),void n.onLoad(t)):this}function c(t,e){var i,a,s,n,o,r,l,d;return t.length>1?(t.each(function(){c($(this),e)}),this):bricksData.hasOwnProperty(t.attr("id"))?(s={onLoad:$.noop},n=$.extend({},s,e),o=bricksData[t.attr("id")],i=t.find(".J_brickBd"),a=t.find(".J_brickNav"),r=x.itemTemplateVideo,l='<a class="more-link" href="'+MI.GLOBAL_CONFIG.wwwSite+'/video/" target="_blank">查看全部<i class="iconfont">&#xe623;</i></a>',d='<ul class="video-list clearfix">'+r(o)+"</ul></div>",a.html(l),i.html(d),void n.onLoad(t)):this}function g(t,e){for(var i in e)if(e.hasOwnProperty(i)){if("smart"===t.attr("id")||"homeelec"===t.attr("id"))return;var a=t.find('[data-gid="'+i+'"]').find(".rank");a.length&&e[i]&&a.text(e[i]+"人评价")}}function u(){("undefined"==typeof isCommentOpen||isCommentOpen)&&$.ajax({url:MI.GLOBAL_CONFIG.assetsSite+"/c/js/indexMD2015.js",cache:!0,dataType:"script",timeout:5e3,error:function(){return!1},success:function(){"undefined"!=typeof commentTotal&&(v=commentTotal,g(m,v))}})}function p(){function t(t){var i=$(e(t));i.appendTo(".header-logo").fadeIn(2e3),window.xmstLittle&&xmstLittle.isFunction(xmstLittle.fn.linkSign)&&xmstLittle(i[0]).linkSign()}var e=i(22);$.ajax({url:"//i.huodong.mi.com/airrecommend/default/getIPAD?ad_id=256",dataType:"jsonp",jsonp:"jsonpcallback",success:function(e){1===parseInt(e.code)&&t(e.data)}})}i(2),i(3),i(4),i(5),i(6),i(7),i(10);var m=$(".J_itemBox"),h=$("#J_modalVideo"),f=i(11),v=null,x={promoTemplateLarge:i(12),promoTemplateMiddle:i(13),itemTemplateMiddle1:i(14),itemTemplateMiddle2:i(15),itemTemplateRecommend:i(16),itemTemplateSmall:i(17),itemTemplateReview:i(18),itemTemplateContent:i(19),itemTemplateContentMore:i(20),itemTemplateVideo:i(21)},_={match:{api:"//rec.www.mi.com/rec/collection?jsonpcallback=aa",morelink:"//list.mi.com/dapei",name:"搭配"},accessories:{api:"//rec.www.mi.com/rec/accessory?jsonpcallback=aa",morelink:"//list.mi.com/pjrm",name:"配件"},around:{api:"//rec.www.mi.com/periphery/get",morelink:"//list.mi.com/zhoubian",name:"周边"}};jQuery(function(t){function e(e,i){var a,s=t(e),n=s.find(".slide").eq(i);n.hasClass("loaded")||(a=t.parseJSON(n.data("bg-set").replace(/'/g,'"')),n.addClass("loaded").find("> a").append('<img src="'+a.img+'"'+(a.imgHd?' srcset="'+a.imgHd+' 2x"':"")+" />"))}var i=t("#J_homeSlider"),a=t("#J_categoryList");0!==t("#comment").length&&u(),f(a),i.slider({mode:"fade",auto:!0,autoHover:!0,onSliderLoad:function(t){e(i,t)},onSlideBefore:function(t,a,s){e(i,s)}}),t(".J_carouselList").carousel({containerSelector:".home-star-goods",controlsSelector:".box-hd .more",controlsClass:"xm-controls-line-small",itemPerSlide:5,auto:!0,pause:8e3}),t(".J_brickBox").on("visible.visibleWatcher",function(){t(this).data("visible")||(s(t(this),{onLoad:function(e){"true"===e.attr("data-from-stat")&&r(e),e.addClass("loaded").find(".J_brickTabSwitch").tabSwitch({events:"mouseenter"}),e.find(".brick-item").on({mouseenter:function(){t(this).addClass("brick-item-active")},mouseleave:function(){t(this).removeClass("brick-item-active")}}),v&&g(e,v),window.xmstLittle&&xmstLittle.isFunction(xmstLittle.fn.linkSign)&&xmstLittle(e[0]).linkSign()}}),t(this).data("visible",!0))}),t(".J_recommendBox").on("visible.visibleWatcher",function(){var e=t(this);e.data("visible")||(e.find(".J_brickBd").miRecommend({type:"homeRecommend",callback:function(){e.find(".xm-controls").appendTo(e.find(".J_brickNav"))}}),e.data("visible",!0))}),t(".J_reviewBox").on("visible.visibleWatcher",function(){t(this).data("visible")||(l(t(this),{onLoad:function(t){v&&g(t,v),window.xmstLittle&&xmstLittle.isFunction(xmstLittle.fn.linkSign)&&xmstLittle(t[0]).linkSign()}}),t(this).data("visible",!0))}),t(".J_contentBox").on("visible.visibleWatcher",function(){t(this).data("visible")||(d(t(this),{onLoad:function(t){t.find(".item-list").carousel({controlsClass:"xm-controls-block-small",pager:!0}),window.xmstLittle&&xmstLittle.isFunction(xmstLittle.fn.linkSign)&&xmstLittle(t[0]).linkSign()}}),t(this).data("visible",!0))}),t(".J_videoBox").on("visible.visibleWatcher",function(){t(this).data("visible")||(c(t(this),{onLoad:function(e){e.find(".J_videoTrigger").on("click",function(e){e.preventDefault(),document.domain="mi.com",h.find(".modal-hd .title").text(t(this).attr("data-video-title")).end().find(".modal-bd").html('<iframe id="miPlayerIframe" width="880" height="536" src="//hd.mi.com/f/zt/hd/miplayer2/index.html?vurl='+t(this).attr("data-video")+"&poster="+t(this).attr("data-video-poster")+'" frameborder="0" allowfullscreen></iframe>').find("iframe").focus(),h.modal({show:!0,backdrop:"static"})}),h.on("hide",function(){h.find(".modal-hd .title").empty(),h.find(".modal-bd").empty()}),window.xmstLittle&&xmstLittle.isFunction(xmstLittle.fn.linkSign)&&xmstLittle(e[0]).linkSign()}}),t(this).data("visible",!0))}),m.visibleWatcher({offset:-300}),doodleData&&0!==doodleData.type&&(1===doodleData.type?p():2===doodleData.type&&doodleData.link&&doodleData.logo&&t('<div class="doodle"><a class="exposure link-block" style="background-image:url('+doodleData.logo+')" href="'+doodleData.link+'" data-stat-id="首页logo广告位" data-log_code="pc#bid=3008001.1&page=home" onclick="_msq.push([\'trackEvent\', \'首页logo广告位\', \''+doodleData.link+"', 'pcpid', 'pc#bid=3008001.1&page=home']);\" target=\"_blank\" >"+doodleData.linkText+"</a></div>").appendTo(".header-logo").delay(1e3).fadeIn()),topbarData&&0!==topbarData.type&&t(".site-topbar").before('<div class="site-bn-bar" style="background-image:url('+topbarData.img+');"><a class="site-bn-bar-link exposure" href="'+topbarData.link+'" data-stat-id="首页顶通广告位" data-log_code="pc#bid=3008000.1&page=home" onclick="_msq.push([\'trackEvent\', \'首页顶通广告位\', \''+topbarData.link+"', 'pcpid', 'pc#bid=3008000.1&page=home']);\" target=\"_blank\" >"+topbarData.linkText+"</a></div>"),"undefined"!=typeof _msq&&_msq.push(["miPageTiming"])})},function(t,e){!function(t){function e(e){function i(t){p.push({x:t.pageX,y:t.pageY}),p.length>f&&p.shift()}function a(){h&&clearTimeout(h),c.exitMenu(this)&&(u&&c.deactivate(u),u=null)}function s(){h&&clearTimeout(h),c.enter(this),r(this)}function n(){c.exit(this)}function o(t){t!==u&&(u&&c.deactivate(u),c.activate(t),u=t)}function r(t){var e=l();e?h=setTimeout(function(){r(t)},e):o(t)}function l(){function e(t,e){return(e.y-t.y)/(e.x-t.x)}if(!u||!t(u).is(c.submenuSelector))return 0;var i=g.offset(),a={x:i.left,y:i.top-c.tolerance},s={x:i.left+g.outerWidth(),y:a.y},n={x:i.left,y:i.top+g.outerHeight()+c.tolerance},o={x:i.left+g.outerWidth(),y:n.y},r=p[p.length-1],l=p[0];if(!r)return 0;if(l||(l=r),l.x<i.left||l.x>o.x||l.y<i.top||l.y>o.y)return 0;if(m&&r.x===m.x&&r.y===m.y)return 0;var d=s,h=o;"left"===c.submenuDirection?(d=n,h=a):"below"===c.submenuDirection?(d=o,h=n):"above"===c.submenuDirection&&(d=a,h=s);var f=e(r,d),x=e(r,h),_=e(l,d),b=e(l,h);return _>f&&x>b?(m=r,v):(m=null,0)}var d,c,g=t(this),u=null,p=[],m=null,h=null,f=3,v=300;d={rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:t.noop,exit:t.noop,activate:t.noop,deactivate:t.noop,exitMenu:t.noop},c=t.extend({},d,e),g.on("mouseleave",a).find(c.rowSelector).on({mouseenter:s,mouseleave:n,click:function(){o(this)}}),t(document).mousemove(i)}t.fn.miMenuAim=function(t){return this.each(function(){e.call(this,t)}),this}}(jQuery)},function(t,e){!function(t){var e={},a={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"ui-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"下一张",prevText:"上一张",nextSelector:null,prevSelector:null,autoControls:!1,startText:"开始",stopText:"停止",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:t.noop,onSlideBefore:t.noop,onSlideAfter:t.noop,onSlideNext:t.noop,onSlidePrev:t.noop,onSliderResize:t.noop};t.fn.slider=function(s){if(0==this.length)return this;if(this.length>1)return this.each(function(){t(this).slider(s)}),this;var n={},o=this;e.el=this;var r=t(window).width(),l=t(window).height(),d=function(){n.settings=t.extend({},a,s),n.settings.slideWidth=parseInt(n.settings.slideWidth),n.children=o.children(n.settings.slideSelector),n.children.length<n.settings.minSlides&&(n.settings.minSlides=n.children.length),n.children.length<n.settings.maxSlides&&(n.settings.maxSlides=n.children.length),n.settings.randomStart&&(n.settings.startSlide=Math.floor(Math.random()*n.children.length)),n.active={index:n.settings.startSlide},n.carousel=n.settings.minSlides>1||n.settings.maxSlides>1,n.carousel&&(n.settings.preloadImages="all"),n.minThreshold=n.settings.minSlides*n.settings.slideWidth+(n.settings.minSlides-1)*n.settings.slideMargin,n.maxThreshold=n.settings.maxSlides*n.settings.slideWidth+(n.settings.maxSlides-1)*n.settings.slideMargin,n.working=!1,n.controls={},n.interval=null,n.animProp="vertical"==n.settings.mode?"top":"left",n.usingCSS=n.settings.useCSS&&"fade"!=n.settings.mode&&function(){var t=document.createElement("div"),e=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in e)if(void 0!==t.style[e[i]])return n.cssPrefix=e[i].replace("Perspective","").toLowerCase(),n.animProp="-"+n.cssPrefix+"-transform",!0;return!1}(),"vertical"==n.settings.mode&&(n.settings.maxSlides=n.settings.minSlides),o.data("origStyle",o.attr("style")),o.children(n.settings.slideSelector).each(function(){t(this).data("origStyle",t(this).attr("style"))}),c()},c=function(){o.wrap('<div class="'+n.settings.wrapperClass+'"><div class="ui-viewport"></div></div>'),n.viewport=o.parent(),n.loader=t('<div class="ui-loading" />'),n.viewport.prepend(n.loader),o.css({width:"horizontal"==n.settings.mode?100*n.children.length+215+"%":"auto",position:"relative"}),n.usingCSS&&n.settings.easing?o.css("-"+n.cssPrefix+"-transition-timing-function",n.settings.easing):n.settings.easing||(n.settings.easing="swing");f();n.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),n.viewport.parent().css({maxWidth:m()}),n.settings.pager||n.viewport.parent().css({margin:"0 auto 0px"}),n.children.css({"float":"horizontal"==n.settings.mode?"left":"none",listStyle:"none",position:"relative"}),n.children.css("width",h()),"horizontal"==n.settings.mode&&n.settings.slideMargin>0&&n.children.css("marginRight",n.settings.slideMargin),"vertical"==n.settings.mode&&n.settings.slideMargin>0&&n.children.css("marginBottom",n.settings.slideMargin),"fade"==n.settings.mode&&(n.children.css({position:"absolute",zIndex:0,display:"none"}),n.children.eq(n.settings.startSlide).css({zIndex:n.settings.slideZIndex,display:"block"})),n.controls.el=t('<div class="ui-controls" />'),n.settings.captions&&C(),n.active.last=n.settings.startSlide==v()-1,n.settings.video&&o.fitVids();var e=n.children.eq(n.settings.startSlide);"all"==n.settings.preloadImages&&(e=n.children),n.settings.ticker?n.settings.pager=!1:(n.settings.pager&&w(),n.settings.controls&&k(),n.settings.auto&&n.settings.autoControls&&y(),(n.settings.controls||n.settings.autoControls||n.settings.pager)&&n.viewport.after(n.controls.el)),g(e,u)},g=function(e,i){var a=e.find("img, iframe").length;if(0==a)return void i();var s=0;e.find("img, iframe").each(function(){t(this).one("load",function(){++s==a&&i()}).each(function(){this.complete&&t(this).load()})})},u=function(){if(n.settings.infiniteLoop&&"fade"!=n.settings.mode&&!n.settings.ticker){var e="vertical"==n.settings.mode?n.settings.minSlides:n.settings.maxSlides,i=n.children.slice(0,e).clone().addClass("ui-clone"),a=n.children.slice(-e).clone().addClass("ui-clone");o.append(i).prepend(a)}n.loader.remove(),_(),"vertical"==n.settings.mode&&(n.settings.adaptiveHeight=!0),n.viewport.height(p()),o.redrawSlider(),n.settings.onSliderLoad(n.active.index),n.initialized=!0,n.settings.responsive&&t(window).bind("resize",W),n.settings.auto&&n.settings.autoStart&&(v()>1||n.settings.autoSlideForOnePage)&&N(),n.settings.ticker&&j(),n.settings.pager&&I(n.settings.startSlide),n.settings.controls&&E(),n.settings.touchEnabled&&!n.settings.ticker&&z()},p=function(){var e=0,a=t();if("vertical"==n.settings.mode||n.settings.adaptiveHeight)if(n.carousel){var s=1==n.settings.moveSlides?n.active.index:n.active.index*x();for(a=n.children.eq(s),i=1;i<=n.settings.maxSlides-1;i++)a=a.add(s+i>=n.children.length?n.children.eq(i-1):n.children.eq(s+i))}else a=n.children.eq(n.active.index);else a=n.children;return"vertical"==n.settings.mode?(a.each(function(i){e+=t(this).outerHeight()}),n.settings.slideMargin>0&&(e+=n.settings.slideMargin*(n.settings.minSlides-1))):e=Math.max.apply(Math,a.map(function(){return t(this).outerHeight(!1)}).get()),"border-box"==n.viewport.css("box-sizing")?e+=parseFloat(n.viewport.css("padding-top"))+parseFloat(n.viewport.css("padding-bottom"))+parseFloat(n.viewport.css("border-top-width"))+parseFloat(n.viewport.css("border-bottom-width")):"padding-box"==n.viewport.css("box-sizing")&&(e+=parseFloat(n.viewport.css("padding-top"))+parseFloat(n.viewport.css("padding-bottom"))),e},m=function(){var t="100%";return n.settings.slideWidth>0&&(t="horizontal"==n.settings.mode?n.settings.maxSlides*n.settings.slideWidth+(n.settings.maxSlides-1)*n.settings.slideMargin:n.settings.slideWidth),t},h=function(){var t=n.settings.slideWidth,e=n.viewport.width();return 0==n.settings.slideWidth||n.settings.slideWidth>e&&!n.carousel||"vertical"==n.settings.mode?t=e:n.settings.maxSlides>1&&"horizontal"==n.settings.mode&&(e>n.maxThreshold||e<n.minThreshold&&(t=(e-n.settings.slideMargin*(n.settings.minSlides-1))/n.settings.minSlides)),t},f=function(){var t=1;if("horizontal"==n.settings.mode&&n.settings.slideWidth>0)if(n.viewport.width()<n.minThreshold)t=n.settings.minSlides;else if(n.viewport.width()>n.maxThreshold)t=n.settings.maxSlides;else{var e=n.children.first().width()+n.settings.slideMargin;t=Math.floor((n.viewport.width()+n.settings.slideMargin)/e)}else"vertical"==n.settings.mode&&(t=n.settings.minSlides);return t},v=function(){var t=0;if(n.settings.moveSlides>0)if(n.settings.infiniteLoop)t=Math.ceil(n.children.length/x());else for(var e=0,i=0;e<n.children.length;)++t,e=i+f(),i+=n.settings.moveSlides<=f()?n.settings.moveSlides:f();else t=Math.ceil(n.children.length/f());return t},x=function(){return n.settings.moveSlides>0&&n.settings.moveSlides<=f()?n.settings.moveSlides:f()},_=function(){if(n.children.length>n.settings.maxSlides&&n.active.last&&!n.settings.infiniteLoop){if("horizontal"==n.settings.mode){var t=n.children.last(),e=t.position();b(-(e.left-(n.viewport.width()-t.outerWidth())),"reset",0)}else if("vertical"==n.settings.mode){var i=n.children.length-n.settings.minSlides,e=n.children.eq(i).position();b(-e.top,"reset",0)}}else{var e=n.children.eq(n.active.index*x()).position();n.active.index==v()-1&&(n.active.last=!0),void 0!=e&&("horizontal"==n.settings.mode?b(-e.left,"reset",0):"vertical"==n.settings.mode&&b(-e.top,"reset",0))}},b=function(t,e,i,a){if(n.usingCSS){var s="vertical"==n.settings.mode?"translate3d(0, "+t+"px, 0)":"translate3d("+t+"px, 0, 0)";o.css("-"+n.cssPrefix+"-transition-duration",i/1e3+"s"),"slide"==e?(o.css(n.animProp,s),o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),P()})):"reset"==e?o.css(n.animProp,s):"ticker"==e&&(o.css("-"+n.cssPrefix+"-transition-timing-function","linear"),o.css(n.animProp,s),o.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){o.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),b(a.resetValue,"reset",0),q()}))}else{var r={};r[n.animProp]=t,"slide"==e?o.animate(r,i,n.settings.easing,function(){P()}):"reset"==e?o.css(n.animProp,t):"ticker"==e&&o.animate(r,speed,"linear",function(){b(a.resetValue,"reset",0),q()})}},S=function(){var e="",i=v();if(!(v()<=1)){for(var a=0;i>a;a++){var s="";n.settings.buildPager&&t.isFunction(n.settings.buildPager)?(s=n.settings.buildPager(a),n.pagerEl.addClass("ui-custom-pager")):(s=a+1,n.pagerEl.addClass("ui-default-pager")),e+='<div class="ui-pager-item"><a href="" data-slide-index="'+a+'" class="ui-pager-link">'+s+"</a></div>"}n.pagerEl.html(e)}},w=function(){n.settings.pagerCustom?n.pagerEl=t(n.settings.pagerCustom):(n.pagerEl=t('<div class="ui-pager" />'),n.settings.pagerSelector?t(n.settings.pagerSelector).html(n.pagerEl):n.controls.el.addClass("ui-has-pager").append(n.pagerEl),S()),n.pagerEl.on("click","a",D)},k=function(){n.controls.next=t('<a class="ui-next" href="">'+n.settings.nextText+"</a>"),n.controls.prev=t('<a class="ui-prev" href="">'+n.settings.prevText+"</a>"),n.controls.next.bind("click",T),n.controls.prev.bind("click",L),n.settings.nextSelector&&t(n.settings.nextSelector).append(n.controls.next),n.settings.prevSelector&&t(n.settings.prevSelector).append(n.controls.prev),n.settings.nextSelector||n.settings.prevSelector||(n.controls.directionEl=t('<div class="ui-controls-direction" />'),n.controls.directionEl.append(n.controls.prev).append(n.controls.next),n.controls.el.addClass("ui-has-controls-direction").append(n.controls.directionEl))},y=function(){n.controls.start=t('<div class="ui-controls-auto-item"><a class="ui-start" href="">'+n.settings.startText+"</a></div>"),n.controls.stop=t('<div class="ui-controls-auto-item"><a class="ui-stop" href="">'+n.settings.stopText+"</a></div>"),n.controls.autoEl=t('<div class="ui-controls-auto" />'),n.controls.autoEl.on("click",".ui-start",A),n.controls.autoEl.on("click",".ui-stop",M),n.settings.autoControlsCombine?n.controls.autoEl.append(n.controls.start):n.controls.autoEl.append(n.controls.start).append(n.controls.stop),n.settings.autoControlsSelector?t(n.settings.autoControlsSelector).html(n.controls.autoEl):n.controls.el.addClass("ui-has-controls-auto").append(n.controls.autoEl),$(n.settings.autoStart?"stop":"start")},C=function(){n.children.each(function(e){var i=t(this).find("img:first").attr("title");void 0!=i&&(""+i).length&&t(this).append('<div class="ui-caption"><span>'+i+"</span></div>")})},T=function(t){n.settings.auto&&o.stopAuto(),o.goToNextSlide(),t.preventDefault()},L=function(t){n.settings.auto&&o.stopAuto(),o.goToPrevSlide(),t.preventDefault()},A=function(t){o.startAuto(),t.preventDefault()},M=function(t){o.stopAuto(),t.preventDefault()},D=function(e){n.settings.auto&&o.stopAuto();var i=t(e.currentTarget);if(void 0!==i.attr("data-slide-index")){var a=parseInt(i.attr("data-slide-index"));a!=n.active.index&&o.goToSlide(a),e.preventDefault()}},I=function(e){var i=n.children.length;return"short"==n.settings.pagerType?(n.settings.maxSlides>1&&(i=Math.ceil(n.children.length/n.settings.maxSlides)),void n.pagerEl.html(e+1+n.settings.pagerShortSeparator+i)):(n.pagerEl.find("a").removeClass("active"),void n.pagerEl.each(function(i,a){t(a).find("a").eq(e).addClass("active")}))},P=function(){if(n.settings.infiniteLoop){var t="";0==n.active.index?t=n.children.eq(0).position():n.active.index==v()-1&&n.carousel?t=n.children.eq((v()-1)*x()).position():n.active.index==n.children.length-1&&(t=n.children.eq(n.children.length-1).position()),t&&("horizontal"==n.settings.mode?b(-t.left,"reset",0):"vertical"==n.settings.mode&&b(-t.top,"reset",0))}n.working=!1,n.settings.onSlideAfter(n.children.eq(n.active.index),n.oldIndex,n.active.index)},$=function(t){n.settings.autoControlsCombine?n.controls.autoEl.html(n.controls[t]):(n.controls.autoEl.find("a").removeClass("active"),n.controls.autoEl.find("a:not(.ui-"+t+")").addClass("active"))},E=function(){1==v()?(n.controls.prev.addClass("disabled"),n.controls.next.addClass("disabled")):!n.settings.infiniteLoop&&n.settings.hideControlOnEnd&&(0==n.active.index?(n.controls.prev.addClass("disabled"),n.controls.next.removeClass("disabled")):n.active.index==v()-1?(n.controls.next.addClass("disabled"),n.controls.prev.removeClass("disabled")):(n.controls.prev.removeClass("disabled"),n.controls.next.removeClass("disabled")))},N=function(){if(n.settings.autoDelay>0){setTimeout(o.startAuto,n.settings.autoDelay)}else o.startAuto();n.settings.autoHover&&o.hover(function(){n.interval&&(o.stopAuto(!0),n.autoPaused=!0)},function(){n.autoPaused&&(o.startAuto(!0),n.autoPaused=null)})},j=function(){var e=0;if("next"==n.settings.autoDirection)o.append(n.children.clone().addClass("ui-clone"));else{o.prepend(n.children.clone().addClass("ui-clone"));var i=n.children.first().position();e="horizontal"==n.settings.mode?-i.left:-i.top}b(e,"reset",0),n.settings.pager=!1,n.settings.controls=!1,n.settings.autoControls=!1,n.settings.tickerHover&&!n.usingCSS&&n.viewport.hover(function(){o.stop()},function(){var e=0;n.children.each(function(i){e+="horizontal"==n.settings.mode?t(this).outerWidth(!0):t(this).outerHeight(!0)});var i=n.settings.speed/e,a="horizontal"==n.settings.mode?"left":"top",s=i*(e-Math.abs(parseInt(o.css(a))));q(s)}),q()},q=function(t){speed=t?t:n.settings.speed;var e={left:0,top:0},i={left:0,top:0};"next"==n.settings.autoDirection?e=o.find(".ui-clone").first().position():i=n.children.first().position();var a="horizontal"==n.settings.mode?-e.left:-e.top,s="horizontal"==n.settings.mode?-i.left:-i.top,r={resetValue:s};b(a,"ticker",speed,r)},z=function(){n.touch={start:{x:0,y:0},end:{x:0,y:0}},n.viewport.bind("touchstart",B)},B=function(t){if(n.working)t.preventDefault();else{n.touch.originalPos=o.position();var e=t.originalEvent;n.touch.start.x=e.changedTouches[0].pageX,n.touch.start.y=e.changedTouches[0].pageY,n.viewport.bind("touchmove",O),n.viewport.bind("touchend",J)}},O=function(t){var e=t.originalEvent,i=Math.abs(e.changedTouches[0].pageX-n.touch.start.x),a=Math.abs(e.changedTouches[0].pageY-n.touch.start.y);if(3*i>a&&n.settings.preventDefaultSwipeX?t.preventDefault():3*a>i&&n.settings.preventDefaultSwipeY&&t.preventDefault(),"fade"!=n.settings.mode&&n.settings.oneToOneTouch){var s=0;if("horizontal"==n.settings.mode){var o=e.changedTouches[0].pageX-n.touch.start.x;s=n.touch.originalPos.left+o}else{var o=e.changedTouches[0].pageY-n.touch.start.y;s=n.touch.originalPos.top+o}b(s,"reset",0)}},J=function(t){n.viewport.unbind("touchmove",O);var e=t.originalEvent,i=0;if(n.touch.end.x=e.changedTouches[0].pageX,n.touch.end.y=e.changedTouches[0].pageY,"fade"==n.settings.mode){var a=Math.abs(n.touch.start.x-n.touch.end.x);a>=n.settings.swipeThreshold&&(n.touch.start.x>n.touch.end.x?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto())}else{var a=0;"horizontal"==n.settings.mode?(a=n.touch.end.x-n.touch.start.x,i=n.touch.originalPos.left):(a=n.touch.end.y-n.touch.start.y,i=n.touch.originalPos.top),!n.settings.infiniteLoop&&(0==n.active.index&&a>0||n.active.last&&0>a)?b(i,"reset",200):Math.abs(a)>=n.settings.swipeThreshold?(0>a?o.goToNextSlide():o.goToPrevSlide(),o.stopAuto()):b(i,"reset",200)}n.viewport.unbind("touchend",J)},W=function(e){if(n.initialized){var i=t(window).width(),a=t(window).height();(r!=i||l!=a)&&(r=i,l=a,o.redrawSlider(),n.settings.onSliderResize.call(o,n.active.index))}};return o.goToSlide=function(e,i){if(!n.working&&n.active.index!=e)if(n.working=!0,n.oldIndex=n.active.index,n.active.index=0>e?v()-1:e>=v()?0:e,n.settings.onSlideBefore(n.children.eq(n.active.index),n.oldIndex,n.active.index),"next"==i?n.settings.onSlideNext(n.children.eq(n.active.index),n.oldIndex,n.active.index):"prev"==i&&n.settings.onSlidePrev(n.children.eq(n.active.index),n.oldIndex,n.active.index),n.active.last=n.active.index>=v()-1,n.settings.pager&&I(n.active.index),n.settings.controls&&E(),"fade"==n.settings.mode)n.settings.adaptiveHeight&&n.viewport.height()!=p()&&n.viewport.animate({height:p()},n.settings.adaptiveHeightSpeed),n.children.filter(":visible").fadeOut(n.settings.speed).css({zIndex:0}),n.children.eq(n.active.index).css("zIndex",n.settings.slideZIndex+1).fadeIn(n.settings.speed,function(){t(this).css("zIndex",n.settings.slideZIndex),P()});else{n.settings.adaptiveHeight&&n.viewport.height()!=p()&&n.viewport.animate({height:p()},n.settings.adaptiveHeightSpeed);var a=0,s={left:0,top:0};if(!n.settings.infiniteLoop&&n.carousel&&n.active.last)if("horizontal"==n.settings.mode){var r=n.children.eq(n.children.length-1);s=r.position(),a=n.viewport.width()-r.outerWidth()}else{var l=n.children.length-n.settings.minSlides;s=n.children.eq(l).position()}else if(n.carousel&&n.active.last&&"prev"==i){var d=1==n.settings.moveSlides?n.settings.maxSlides-x():(v()-1)*x()-(n.children.length-n.settings.maxSlides),r=o.children(".ui-clone").eq(d);s=r.position()}else if("next"==i&&0==n.active.index)s=o.find("> .ui-clone").eq(n.settings.maxSlides).position(),n.active.last=!1;else if(e>=0){var c=e*x();s=n.children.eq(c).position()}if("undefined"!=typeof s){var g="horizontal"==n.settings.mode?-(s.left-a):-s.top;b(g,"slide",n.settings.speed)}}},o.goToNextSlide=function(){if(n.settings.infiniteLoop||!n.active.last){var t=parseInt(n.active.index)+1;o.goToSlide(t,"next")}},o.goToPrevSlide=function(){if(n.settings.infiniteLoop||0!=n.active.index){var t=parseInt(n.active.index)-1;o.goToSlide(t,"prev")}},o.startAuto=function(t){n.interval||(n.interval=setInterval(function(){"next"==n.settings.autoDirection?o.goToNextSlide():o.goToPrevSlide()},n.settings.pause),n.settings.autoControls&&1!=t&&$("stop"))},o.stopAuto=function(t){n.interval&&(clearInterval(n.interval),n.interval=null,n.settings.autoControls&&1!=t&&$("start"))},o.getCurrentSlide=function(){return n.active.index},o.getCurrentSlideElement=function(){return n.children.eq(n.active.index)},o.getSlideCount=function(){return n.children.length},o.redrawSlider=function(){n.children.add(o.find(".ui-clone")).width(h()),n.viewport.css("height",p()),n.settings.ticker||_(),n.active.last&&(n.active.index=v()-1),n.active.index>=v()&&(n.active.last=!0),n.settings.pager&&!n.settings.pagerCustom&&(S(),I(n.active.index))},o.destroySlider=function(){n.initialized&&(n.initialized=!1,t(".ui-clone",this).remove(),n.children.each(function(){void 0!=t(this).data("origStyle")?t(this).attr("style",t(this).data("origStyle")):t(this).removeAttr("style")}),void 0!=t(this).data("origStyle")?this.attr("style",t(this).data("origStyle")):t(this).removeAttr("style"),t(this).unwrap().unwrap(),n.controls.el&&n.controls.el.remove(),n.controls.next&&n.controls.next.remove(),n.controls.prev&&n.controls.prev.remove(),n.pagerEl&&n.settings.controls&&n.pagerEl.remove(),t(".ui-caption",this).remove(),n.controls.autoEl&&n.controls.autoEl.remove(),clearInterval(n.interval),n.settings.responsive&&t(window).unbind("resize",W))},o.reloadSlider=function(t){void 0!=t&&(s=t),o.destroySlider(),d()},d(),this}}(jQuery)},function(t,e){!function(t){function e(i,a){function s(e){o=e.find(c.tabSelector),o.on(c.events,function(i){var a=o.index(t(this));

if(i.preventDefault(),t(this).attr("href")&&t(this).attr("href").split("#")[1]){var s=t(window).scrollTop();window.location.hash=t(this).attr("href").split("#")[1],t("body, html").scrollTop(s)}n.each(function(){t(this).find(c.tabSelector).eq(a).addClass("tab-active").siblings(c.tabSelector).removeClass("tab-active")}),"function"==typeof c.onShow?c.onShow(l.eq(a),a):l.eq(a).removeClass("hide").show(),"function"==typeof c.onHide?c.onHide(l.eq(a).siblings(c.contentSelector),a):l.eq(a).siblings(c.contentSelector).addClass("hide").hide(),c.onLoad(e,a,c)})}var n,o,r,l,d,c;if(d={isSync:!1,events:"click",tabSelector:"li",containerSelector:".tab-container",contentSelector:".tab-content",onShow:null,onHide:null,onLoad:t.noop},c=t.extend({},d,a),c.isSync===!1){if(0===i.length)return i;if(i.length>1)return i.each(function(){e(t(this),a)}),i}n=t(i),r=n.first().attr("data-tab-target")?t("#"+n.first().attr("data-tab-target")):n.first().siblings(c.containerSelector),l=r.children(c.contentSelector),n.each(function(){s(t(this))}),c.onLoad(n,c)}t.fn.tabSwitch=function(t){return e(this,t),this}}(jQuery)},function(t,e){!function(t){function e(e){function i(){return 0>=x?!1:(b&&clearInterval(b),void(b=setTimeout(function(){var t=S===x-1?0:S+1;a(t),i()},m.pause)))}function a(t){return S===t?!1:(_.css({marginLeft:-f*h*t,transition:"margin-left "+m.speed/1e3+"s "+m.easing}),m.controls&&(0===t?c.addClass("control-disabled"):c.removeClass("control-disabled"),t===x-1?g.addClass("control-disabled"):g.removeClass("control-disabled")),m.pager&&u.find("li").eq(t).addClass("pager-active").siblings().removeClass("pager-active"),void(S=t))}function s(){for(var e='<ul class="xm-pagers">',i=0,s=x;s>i;i+=1)e+='<li class="pager'+(0===i?" pager-active":"")+'"><span class="dot">'+(i+1)+"</span></li>";e+="</ul>",u.html(e),u.find("li").off(".carousel").on("click.carousel",function(){t(this).addClass("pager-active").siblings().removeClass("pager-active"),a(u.find("li").index(t(this)))})}function n(){h=m.itemPerSlide||Math.ceil(r.width()/f),x=Math.ceil(l.length/h),1>=x||(a(0),m.pager&&s(),m.auto&&(i(),m.controls&&d.find(".control").off(".carousel").on({"mouseenter.carousel":function(){b&&clearTimeout(b)},"mouseleave.carousel":function(){i()}}),m.pager&&u.find(".pager").off(".carousel").on({"mouseenter.carousel":function(){b&&clearTimeout(b)},"mouseleave.carousel":function(){i()}})))}var o,r,l,d,c,g,u,p,m,h,f,v,x,_=t(this),b=0,S=-1;return p={itemSelector:"> li",itemWidth:null,itemHeight:null,itemPerSlide:null,containerSelector:null,controlsSelector:null,pagersSelector:null,speed:500,easing:"ease",auto:!1,pause:5e3,controls:!0,controlsClass:"xm-controls-line-small",pager:!1,onLoad:t.noop},m=t.extend({},p,e),l=_.find(m.itemSelector),m.itemPerSlide&&l.length<=m.itemPerSlide?this:(f=m.itemWidth||l.outerWidth(!0),v=m.itemHeight||l.outerHeight(),o=m.containerSelector?_.closest(m.containerSelector):_.parent(),o.addClass("xm-carousel-container"),r=_.wrap('<div class="xm-carousel-wrapper"></div>').closest(".xm-carousel-wrapper").css({height:v,overflow:"hidden"}),_.css("width",f*l.length),m.controls&&(d=t('<div class="xm-controls '+m.controlsClass+' xm-carousel-controls"><a class="control control-prev iconfont" href="javascript: void(0);">&#xe628;</a><a class="control control-next iconfont" href="javascript: void(0);">&#xe623;</a></div>'),m.controlsSelector?o.find(m.controlsSelector).append(d):d.insertAfter(r),c=d.find(".control-prev"),g=d.find(".control-next"),c.on("click",function(e){e.preventDefault(),t(this).hasClass("control-disabled")||a(S-1)}),g.on("click",function(e){e.preventDefault(),t(this).hasClass("control-disabled")||a(S+1)})),m.pager&&(u=t('<div class="xm-pagers-wrapper"></div>'),m.pagersSelector?o.find(m.pagersSelector).append(u):u.insertAfter(r)),n(),m.onLoad(_),void t(window).on("resize",n))}t.fn.carousel=function(t){return this.each(function(){e.call(this,t)}),this}}(jQuery)},function(t,e){!function(t){function e(e){function i(){for(var e=-1,i=t(document).scrollTop(),a=0,s=d.length;s>a&&i+o.viewport.height()>d[a];a+=1)e+=1;return e}function a(){var e=i();l!==e&&(l=e,r.filter(function(e){return l>=e&&!t(this).hasClass(o.visibleClass)}).addClass(o.visibleClass).trigger("visible.visibleWatcher"),o.onVisible(r.eq(l),l))}function s(){r.each(function(){var e=t(this).attr("data-offset")?Number(t(this).attr("data-offset")):o.offset,i=e%1===0?e:e*o.viewport.height();d.push(t(this).offset().top+i)}),a(),o.onLoad()}var n,o,r=t(this),l=-1,d=[];n={viewport:t(window),visibleClass:"is-visible",offset:300,onLoad:t.noop,onVisible:t.noop},o=t.extend({},n,e),s(),o.viewport.on({"scroll.visibleWatcher":a,"resize.visibleWatcher":s})}t.fn.visibleWatcher=function(t){return e.call(this,t),this}}(jQuery)},function(t,e,i){function a(t,e,i){var a=t.find("a");$.each(a,function(t,a){var s,n=$(a).attr("data-stat-index"),o=r($(a).attr("data-stat-text")),l=$(a).attr("data-stat-method"),d=$(a).attr("data-stat-addcart");s=d?"stat_"+e+d+"."+i+"_"+n+"_"+l:"stat_"+e+"."+i+"_"+n+"_"+l,$(a).attr({"data-stat-pid":s,"data-stat-aid":o})})}function s(t){if("cart"!==o.page&&o.useCarousel){var e=t.find("ul").eq(0);e&&e.carousel({containerSelector:t,controls:o.carouselControl,pager:o.carouselPage,itemHeight:320})}o.isBuy&&($(".J_xm-recommend-list").hover(function(){$(this).find(".J_xm-recommend-btn").show()},function(){$(this).find(".J_xm-recommend-btn").hide()}),$(".J_xm-recommend-btn").off(".addcart").on("click.addcart",function(){function t(){i.removeClass("xm-recommend-notice-active"),setTimeout(function(){e.removeClass("disabled"),i.empty()},500)}var e=$(this),i=e.parent().siblings(".xm-recommend-notice");return e.hasClass("disabled")?!1:(MI.addShopCart(e.attr("data-stat-gid"),function(e){1===e.code?"cart"!==o.page?(i.addClass("xm-recommend-notice-active").empty().append('<a class="btn btn-block btn-green btn-notice" href="javascript: void(0);">成功加入购物车</a>'),i.find(".btn-notice").one("click",t),setTimeout(function(){t(),location.reload()},1e3)):location.href=MI.GLOBAL_CONFIG.staticSite+"/cart/":alert(e.msg)}),!1)})),a(t,o.page,o.pageName),$.isFunction($("body").linkSign)&&t.linkSign({live:!0});var i=t.attr("id"),s="re-"+o.page+"."+o.tips;$.force_appear(),t.appear(),t.one("appear",function(){if("undefined"!=typeof _msq&&_msq.push(["trackPanelShow",i,s]),!t.data("log_codes")){for(var e=t.find(".J_xm-recommend-list").find("dt").find("a"),a="",n=0,o=e.length;o>n;n++)a+=e.eq(n).data("log_code")+";";t.attr("data-log_codes",a.substring(0,a.length-1))}})}i(5),i(8);var n={},o={},r=function(t){try{return t.replace(/\s/g,"")}catch(e){return t}};!function(t){function e(t,e,a,n){if(t.length<5)return!1;var r=i(9),l={v:1,data:t,useCarousel:o.useCarousel,isBuy:o.isBuy,itemSite:MI.GLOBAL_CONFIG.itemSite,title:n?"买购物车中商品的人还看了":o.title,page:o.page,hideTitle:o.hideTitle,type:e.type};a.addClass("container").html(r(l)),s(a),null!==e.callback&&"function"==typeof e.callback&&e.callback()}function a(t){return t.length<5?!1:(t.length>20&&(t=t.slice(0,20)),t.length>15&&t.length<20&&(t=t.slice(0,15)),t.length>10&&t.length<15&&(t=t.slice(0,10)),t.length>5&&t.length<10&&(t=t.slice(0,5)),t)}function r(i){var s=o.api,r={cid:n.gid};t.ajax({url:s,dataType:"jsonp",jsonp:"jsonpcallback",cache:!0,data:r,success:function(s){if(0===s.code){s=s.data||{};var o=t(i);"buyRecommend"===n.type||"paySuccess"===n.type?(e(a(s.alsobuy),n,o),n.type="dirHistoryRecommend",o=t("#J_historyRecommend"),e(a(s.alsoview),n,o,!0)):e(a(s),n,o)}}})}var l={recommendBox:{api:"//rec.www.mi.com/rec/cartbuy",title:"买购物车中商品的人还买了",isBuy:!0,page:"Cart",pageName:"购物车",tips:"购物车推荐",useCarousel:!1},historyRecommend:{api:"//rec.www.mi.com/rec/cartempty",title:"为您推荐",isBuy:!0,page:"Cart",pageName:"购物车",tips:"猜你喜欢",useCarousel:!1},dirHistoryRecommend:{api:"//rec.www.mi.com/rec/cartsuccess",title:"根据浏览向您推荐",isBuy:!0,page:"CartSuc",pageName:"加购成功",tips:"看了还看",useCarousel:!1},alsoBuy:{api:"//rec.www.mi.com/rec/detail",title:"买过该商品的人还买了",isBuy:!0,page:"ItemTail",pageName:"单品页底部",tips:"买过该商品的人还买了",useCarousel:!0,carouselControl:!1,carouselPage:!0},buyRecommend:{api:"//rec.www.mi.com/rec/cartsuccess",title:"买购物车中商品的人还买了",isBuy:!0,page:"CartSuc",pageName:"加购成功",tips:"买过该商品的人还买了",useCarousel:!0,carouselControl:!1,carouselPage:!0},searchHistoryRecommend:{api:"//rec.www.mi.com/rec/search",title:"您还看了",isBuy:!0,page:"Search",pageName:"搜索页",tips:"您还看了",useCarousel:!0,carouselControl:!1,carouselPage:!0},homeRecommend:{api:"//rec.www.mi.com/rec/guesslike",title:"为你推荐",isBuy:!1,page:"Home",pageName:"首页",tips:"为你推荐",useCarousel:!0,carouselControl:!0,carouselPage:!1,hideTitle:!0},paySuccess:{api:"//rec.www.mi.com/rec/cartsuccess",title:"为你推荐",isBuy:!0,page:"CartSuc",pageName:"支付成功",tips:"为你推荐",useCarousel:!0,carouselControl:!1,carouselPage:!0}};t.fn.miRecommend=function(e){n=t.extend(l,e),o=n[n.type],r(this)}}(jQuery)},function(t,e){!function(t){function e(){n=!1;for(var e=0,s=a.length;s>e;e++){var o=t(a[e]).filter(function(){return t(this).is(":appeared")});if(o.trigger("appear",[o]),i){var r=i.not(o);r.trigger("disappear",[r])}i=o}}var i,a=[],s=!1,n=!1,o={interval:250,force_process:!1},r=t(window);t.expr[":"].appeared=function(e){var i=t(e);if(!i.is(":visible"))return!1;var a=r.scrollLeft(),s=r.scrollTop(),n=i.offset(),o=n.left,l=n.top;return l+i.height()>=s&&l-(i.data("appear-top-offset")||0)<=s+r.height()&&o+i.width()>=a&&o-(i.data("appear-left-offset")||0)<=a+r.width()?!0:!1},t.fn.extend({appear:function(i){var r=t.extend({},o,i||{}),l=this.selector||this;if(!s){var d=function(){n||(n=!0,setTimeout(e,r.interval))};t(window).scroll(d).resize(d),s=!0}return r.force_process&&setTimeout(e,r.interval),a.push(l),t(l)}}),t.extend({force_appear:function(){return s?(e(),!0):!1}})}(jQuery)},function(t,e){t.exports=function(t){var e="";t.title&&!t.hideTitle&&(e+='<h2 class="xm-recommend-title"><span>'+t.title+"</span></h2>"),e+='<div class="xm-recommend"> ',e+=t.useCarousel?' <ul class="xm-carousel-col-5-list xm-carousel-list clearfix"> ':' <ul class="row clearfix"> ';var i=t.data;if(i)for(var a,s=-1,n=i.length-1;n>s;){a=i[s+=1],e+=" ",e+=t.useCarousel?' <li class="J_xm-recommend-list"> ':' <li class="J_xm-recommend-list span4"> ',e+=" ";var o=/.jpg|.jpeg|.png/,r=o.exec(a.image),l="!140x140"+r,d="!280x280"+r;if(e+=" ",a.ext&&a.ext.img&&a.ext.url){e+=" ";var o=/.jpg|.jpeg|.png/,c=o.exec(a.ext.img),g="!234x300"+c,u="!468x600"+c;e+=' <a target="_blank" href="'+a.ext.url+'" data-log_code="'+a.logcode+'" data-stat-method="'+t.v+"_"+a.algorithm+'" data-stat-index='+s+' data-stat-text="'+a.name+'"> <img src="'+a.ext.img.replace(/.jpg|.png|.jpeg/,g)+'" srcset="'+a.ext.img.replace(/.jpg|.png|.jpeg/,u)+'  2x" alt="'+a.name+'" /> </a> '}else e+=' <dl> <dt> <a href="'+t.itemSite+"/"+a.commodityid+'.html" data-log_code="'+a.logcode+'" data-stat-method="'+t.v+"_"+a.algorithm+'" data-stat-index='+s+' data-stat-text="'+a.name+'" target="_blank"> <img src="'+a.image.replace(/.jpg|.png|.jpeg/,l)+'" srcset="'+a.image.replace(/.jpg|.png|.jpeg/,d)+'  2x" alt="'+a.name+'" /> </a> </dt> <dd class="xm-recommend-name"> <a href="'+t.itemSite+"/"+a.commodityid+'.html" data-log_code="'+a.logcode+'" data-stat-method="'+t.v+"_"+a.algorithm+'" data-stat-index='+s+' target="_blank"> '+a.name+' </a> </dd> <dd class="xm-recommend-price">'+a.price+'元</dd> <dd class="xm-recommend-tips"> ',a.comments&&(e+=" ",parseInt(a.comments)>0&&(e+=" "+a.comments+"人好评 "),e+=" "),e+=" ",t.isBuy&&(e+=' <a href="'+t.itemSite+"/cart/add/"+a.goodsid+'-0-1" data-log_code="'+a.logcode+'" data-stat-gid="'+a.goodsid+'" data-stat-method="'+t.v+"_"+a.algorithm+'" data-stat-index='+s+' data-stat-text="'+a.name+'" data-stat-addcart="加购" class="btn btn-small btn-line-primary J_xm-recommend-btn">加入购物车</a> '),e+=' </dd> <dd class="xm-recommend-notice"></dd> </dl> ';e+=" </li>"}return e+="</ul></div>"}},function(t,e){jQuery(function(t){var e=document.all&&!window.XMLHttpRequest,i=t("body");e&&i.addClass("ie6")})},function(t,e){t.exports=function(t){var e=$(t),i=e.find("> li");i.each(function(){var t,e=$(this).find(".children-list").find("> li");$(this).find(".children").addClass("children-col-"+Math.ceil(e.length/6)),e.length>6&&(t=$(document.createDocumentFragment()),e.each(function(e){e%6===0&&t.append($('<ul class="children-list children-list-col children-list-col-'+Math.ceil((e+1)/6)+'"></ul>')),$(this).appendTo(t.find(".children-list-col-"+Math.ceil((e+1)/6)))}),$(this).find(".children").html(t))}),e.miMenuAim({activate:function(t){$(t).addClass("category-item-active").find("img").each(function(){$(this).attr("src",$(this).attr("data-src"))})},deactivate:function(t){$(t).removeClass("category-item-active")},exitMenu:function(){return!0}})}},function(t,e){t.exports=function(t){var e="",i=t;if(i)for(var a,s=-1,n=i.length-1;n>s;)a=i[s+=1],e+=' <li class="brick-item brick-item-l"> <a href="'+a.url+'" class="exposure" data-stat-aid="AA'+a.adv_id+'" data-stat-pid="2_'+a.area_id+"_"+(s+1)+"_"+a.space_id+'" data-log_code="'+a.log_code+'" target="_blank"><img src="'+a.image+'"  alt="" /></a> </li>';return e}},function(t,e){t.exports=function(t){var e="",i=t;if(i)for(var a,s=-1,n=i.length-1;n>s;)a=i[s+=1],e+=' <li class="brick-item brick-item-m"> <a href="'+a.url+'" class="exposure" data-stat-aid="AA'+a.adv_id+'" data-stat-pid="2_'+a.area_id+"_"+(s+1)+"_"+a.space_id+'" data-log_code="'+a.log_code+'" target="_blank"><img src="'+a.image+'"  alt="" /></a> </li>';return e}},function(t,e){t.exports=function(t){var e="",i=t;if(i)for(var a,s=-1,n=i.length-1;n>s;)if(a=i[s+=1],e+=" ",a.goods_id){if(e+=' <li class="brick-item brick-item-m" data-gid="'+("0"!==a.goods_id?a.goods_id:a.commodity_id)+'"> <div class="figure figure-img"> <a class="exposure" href="'+a.url+'" data-stat-aid="AA'+a.adv_id+'" data-stat-pid="2_'+a.area_id+"_"+a.sort+"_"+a.space_id+'" target="_blank" data-log_code="'+a.log_code+'"><img src="'+a.image+'" width="150" height="150" alt="'+a.title+'" /></a> </div> <h3 class="title"> <a href="'+a.url+'" data-stat-aid="AA'+a.adv_id+'" data-stat-pid="2_'+a.area_id+"_"+a.sort+"_"+a.space_id+'" data-log_code="'+a.log_code+'" target="_blank">'+a.title+"</a></h3> ","undefined"!=typeof a.sectionName&&"smart"===a.sectionName&&(e+=' <p class="desc">'+a.desc+"</p> "),e+=' <p class="price"> <span class="num">'+a.sale_price+"</span>元 ",Number(a.origin_price)>Number(a.sale_price)&&(e+=' <del><span class="num">'+a.origin_price+"</span>元</del> "),e+=' </p> <p class="rank"></p> ',"1"===a.is_discount&&Number(a.origin_price)>Number(a.sale_price)){e+=' <div class="flag flag-saleoff"> ';var o=Number(a.sale_price)/Number(a.origin_price)*10;e+=" ",9>o?(e+=" ",o=Math.ceil(o),e+=" "):(e+=" ",o=Math.ceil(10*o)/10,e+=" "),e+=" 享"+o+"折 </div> "}else parseInt(a.free_ship)>0?(e+=' <div class="flag flag-postfree">',e+=1===parseInt(a.free_ship)?"免邮费":""+a.free_ship+"件包邮",e+="</div> "):"1"===a.buy_give?e+=' <div class="flag flag-gift">有赠品</div> ':"1"===a.is_new&&(e+=' <div class="flag flag-new">新品</div> ');e+=" ",a.comment&&a.comment.content&&(e+=' <div class="review-wrapper"> <a href="'+a.url+'" data-stat-aid="AA'+a.adv_id+'" data-stat-pid="2_'+a.area_id+"_"+a.sort+"_"+a.space_id+'" data-log_code="'+a.log_code+'" target="_blank"> <span class="review">'+a.comment.content+'</span> <span class="author"> 来自于 '+a.comment.user_name+' 的评价 <span class="date" data-date="'+a.comment.add_time+'"></span> </span> </a> </div> '),e+=" </li> "}return e}},function(t,e){t.exports=function(t){var e="",i=t;if(i)for(var a,s=-1,n=i.length-1;n>s;)if(a=i[s+=1],e+=" ",a.goods_id){if(e+=' <li class="brick-item brick-item-m brick-item-m-2" data-gid="'+("0"!==a.goods_id?a.goods_id:a.commodity_id)+'"> <div class="figure figure-img"> <a class="exposure" href="'+a.url+'" data-stat-aid="AA'+a.adv_id+'" data-stat-pid="2_'+a.area_id+"_"+a.sort+"_"+a.space_id+'" data-log_code="'+a.log_code+'" target="_blank"> <img src="'+a.image+'" width="160" height="160" alt="'+a.title+'" /> </a> </div> <h3 class="title"><a href="'+a.url+'" data-stat-aid="AA'+a.adv_id+'" data-stat-pid="2_'+a.area_id+"_"+a.sort+"_"+a.space_id+'" data-log_code="'+a.log_code+'" target="_blank">'+a.title+'</a></h3> <p class="desc">'+a.desc+'</p> <p class="price"> <span class="num">'+a.sale_price+"</span>元 ",Number(a.origin_price)>Number(a.sale_price)&&(e+=' <del><span class="num">'+a.origin_price+"</span>元</del> "),e+=" </p> ","1"===a.is_discount&&Number(a.origin_price)>Number(a.sale_price)){e+=' <div class="flag flag-saleoff"> ';var o=Number(a.sale_price)/Number(a.origin_price)*10;e+=" ",9>o?(e+=" ",o=Math.ceil(o),e+=" "):(e+=" ",o=Math.ceil(10*o)/10,e+=" "),e+=" 享"+o+"折 </div> "}else parseInt(a.free_ship)>0?(e+=' <div class="flag flag-postfree">',e+=1===parseInt(a.free_ship)?"免邮费":""+a.free_ship+"件包邮",e+="</div> "):"1"===a.buy_give?e+=' <div class="flag flag-gift">有赠品</div> ':"1"===a.is_new&&(e+=' <div class="flag flag-new">新品</div> ');e+=" </li> "}return e}},function(t,e){t.exports=function(t){var e="",i=t.data;if(i)for(var a,s=-1,n=i.length-1;n>s;)a=i[s+=1],e+=" ",7>s&&(e+=' <li class="brick-item brick-item-m" data-gid="'+a.goodsid+'"> <div class="figure figure-img"> <a href="'+t.itemSite+"/"+a.commodityid+'.html" data-log_code="'+a.logcode+'" data-stat-method="'+t.v+"_"+a.algorithm+'" data-stat-index="'+s+'" data-stat-text="'+a.name+'" target="_blank"><img src="'+a.image+'?width=150&height=150" width="150" height="150" alt="'+a.name+'" /></a> </div> <h3 class="title"> <a href="'+t.itemSite+"/"+a.commodityid+'.html" data-log_code="'+a.logcode+'" data-stat-method="'+t.v+"_"+a.algorithm+'" data-stat-index="'+s+'" data-stat-text="'+a.name+'" target="_blank"> ',e+=a.adapt&&a.adapt[0]&&-1==a.name.indexOf(a.adapt[0])?" "+a.adapt[0]+" "+a.name+" ":" "+a.name+" ",e+=' </a></h3> <p class="price"> <span class="num">'+a.price+"</span>元 ",Number(a.market_price)>Number(a.price)&&(e+=' <del><span class="num">'+a.market_price+"</span>元</del> "),e+=" </p> ","0"!==a.comments&&(e+=' <p class="rank">'+a.comments+"人评价</p> "),e+=" ",a.isnew?e+=' <div class="flag flag-new">新品</div> ':a.post_freenum?(e+=' <div class="flag flag-postfree">',e+=1===a.post_freenum?"免邮费":""+a.post_freenum+"件包邮",e+="</div> "):a.hasgift?e+=' <div class="flag flag-gift">有赠品</div> ':a.discount&&(e+=' <div class="flag flag-saleoff"> 享'+a.discount+" </div> "),e+=" ",a.commentcontent&&a.commentuser&&(e+=' <div class="review-wrapper"> <a href="'+t.itemSite+"/"+a.commodityid+'.html" data-log_code="'+a.logcode+'" data-stat-method="'+t.v+"_"+a.algorithm+'" data-stat-index="'+s+'" data-stat-text="'+a.name+'" target="_blank"> <span class="review">'+a.commentcontent+'</span> <span class="author"> 来自于 '+a.commentuser+' 的评价 <span class="date"></span> </span> </a> </div> '),e+=" </li> "),e+=" ",7===s&&(e+=' <li class="brick-item brick-item-s" data-gid="'+a.goodsid+'"> <div class="figure figure-img"> <a href="'+t.itemSite+"/"+a.commodityid+'.html" data-log_code="'+a.logcode+'" data-stat-method="'+t.v+"_"+a.algorithm+'" data-stat-index="'+s+'" data-stat-text="'+a.name+'" target="_blank"> <img src="'+a.image+'?width=80&height=80" width="80" height="80" alt="'+a.name+'" /> </a> </div> <h3 class="title"> <a href="'+t.itemSite+"/"+a.commodityid+'.html" data-log_code="'+a.logcode+'" data-stat-method="'+t.v+"_"+a.algorithm+'" data-stat-index="'+s+'" data-stat-text="'+a.name+'" target="_blank">'+a.name+'</a></h3> <p class="price"><span class="num">'+a.price+'</span>元</p> </li> <li class="brick-item brick-item-s"> <div class="figure figure-more"><a href="'+t.morelink+'" target="_blank"><i class="iconfont">&#xe615;</i></a></div> <a class="more" href="'+t.morelink+'" target="_blank">浏览更多<small>热门</small></a> </li> ');return e}},function(t,e){t.exports=function(t){var e="",i=t;if(i)for(var a,s=-1,n=i.length-1;n>s;)a=i[s+=1],e+=" ",a.goods_id&&(e+=' <li class="brick-item brick-item-s" data-gid="'+("0"!==a.goods_id?a.goods_id:a.commodity_id)+'"> <div class="figure figure-img"> <a href="'+a.url+'" class="exposure" data-stat-aid="AA'+a.adv_id+'" data-stat-pid="2_'+a.area_id+"_"+a.sort+"_"+a.space_id+'" data-log_code="'+a.log_code+'" target="_blank"> <img src="'+a.image+'" width="80" height="80" alt="'+a.title+'" /> </a> </div> <h3 class="title"><a href="'+a.url+'" class="exposure" data-stat-aid="AA'+a.adv_id+'" data-stat-pid="2_'+a.area_id+"_"+a.sort+"_"+a.space_id+'" data-log_code="'+a.log_code+'" target="_blank">'+a.title+'</a></h3> <p class="price"><span class="num">'+a.sale_price+"</span>元</p> </li> ");return e}},function(t,e){t.exports=function(t){var e="",i=t;if(i)for(var a,s=-1,n=i.length-1;n>s;)a=i[s+=1],e+=" ",a.goods_id&&(e+=' <li class="review-item',0===s&&(e+=" review-item-first"),e+='" data-gid="'+a.goods_id+'"> <div class="figure figure-img"> <a class="exposure" href="'+a.url+'" data-stat-aid="AA'+a.adv_id+'" data-stat-pid="2_'+a.area_id+"_"+(s+1)+"_"+a.space_id+'" data-log_code="'+a.log_code+'" target="_blank"> <img src="'+a.image+'" width="296" height="220" alt="'+a.title+'" /> </a> </div> ',a.comment&&a.comment.content&&(e+=' <p class="review"><a href="'+(MI.GLOBAL_CONFIG.orderSite+"/comment/commentDetail/comment_id/"+a.comment.comment_id)+'" data-stat-aid="AA'+a.adv_id+'" data-stat-pid="2_'+a.area_id+"_"+(s+1)+"_"+a.space_id+'" data-log_code="'+a.log_code+'" target="_blank">'+a.comment.content+'</a></p> <p class="author"> 来自于 '+a.comment.user_name+' 的评价 <span class="date" data-date="'+a.comment.add_time+'"></span> </p> <div class="info"> <h3 class="title"><a href="'+a.url+'" data-stat-aid="AA'+a.adv_id+'" data-stat-pid="2_'+a.area_id+"_"+(s+1)+"_"+a.space_id+'" data-log_code="'+a.log_code+'" target="_blank">'+a.title+'</a></h3> <span class="sep">|</span> <p class="price"><span class="num">'+a.sale_price+"</span>元</p> </div> "),e+=" </li> ");return e}},function(t,e){t.exports=function(t){var e="",i=t;if(i)for(var a,s=-1,n=i.length-1;n>s;)a=i[s+=1],e+='<li> <h4 class="name"> <a href="'+a.url+'" class="exposure" data-stat-aid="AA'+a.adv_id+'" data-stat-pid="2_'+a.area_id+"_"+(s+1)+"_"+a.space_id+'" data-log_code="'+a.log_code+'" tabindex="-1" target="_blank">'+a.title+'</a></h4> <p class="desc"><a href="'+a.url+'" data-stat-aid="AA'+a.adv_id+'" data-stat-pid="2_'+a.area_id+"_"+(s+1)+"_"+a.space_id+'" data-log_code="'+a.log_code+'" tabindex="-1" target="_blank">'+a.desc+'</a></p> <p class="price"><a href="'+a.url+'" data-stat-aid="AA'+a.adv_id+'" data-stat-pid="2_'+a.area_id+"_"+(s+1)+"_"+a.space_id+'" data-log_code="'+a.log_code+'" tabindex="-1" target="_blank">'+a.sale_price+'</a></p> <div class="figure figure-img"> <a href="'+a.url+'" data-stat-aid="AA'+a.adv_id+'" data-stat-pid="2_'+a.area_id+"_"+(s+1)+"_"+a.space_id+'" data-log_code="'+a.log_code+'" tabindex="-1" target="_blank"> <img src="'+a.image+'" width="160" height="140" alt="'+a.title+'" /> </a> </div></li>';return e}},function(t,e){t.exports=function(t){var e='<li class="more"> <p class="desc">'+t.desc+'</p> <a class="btn btn-small btn-line-'+t.style+'" href="'+t.url+'" tabindex="-1" target="_blank">前往'+t.text+'</a> <img class="thumb" src="'+t.image+'" width="160" height="140" alt="'+t.text+'" /></li>';return e}},function(t,e){t.exports=function(t){var e="",i=t;if(i)for(var a,s=-1,n=i.length-1;n>s;)a=i[s+=1],e+='<li class="video-item',0===s&&(e+=" video-item-first"),e+='"> <div class="figure figure-img"> <a class="J_videoTrigger exposure" href="javascript: void(0);" data-stat-aid="AA'+a.adv_id+'" data-stat-pid="2_'+a.area_id+"_"+(s+1)+"_"+a.space_id+'" data-log_code="'+a.log_code+'" data-video="'+(a.mivideo.hd_url||a.mivideo.sd_url)+'" data-video-poster="'+a.mivideo.image_url+'" data-video-title="'+a.title+'" title="点击播放视频" > <img src="'+a.image+'" width="296" height="180" alt="'+a.title+'" /> <span class="play"><i class="iconfont">&#xe601;</i></span> </a> </div> <h3 class="title"> <a class="J_videoTrigger" href="javascript: void(0);" data-stat-aid="AA'+a.adv_id+'" data-stat-pid="2_'+a.area_id+"_"+(s+1)+"_"+a.space_id+'" data-log_code="'+a.log_code+'" data-video="'+(a.mivideo.hd_url||a.mivideo.sd_url)+'" data-video-poster="'+a.mivideo.image_url+'" data-video-title="'+a.title+'" title="点击播放视频" >'+a.title+'</a> </h3> <p class="desc">'+a.desc+"</p></li>";return e}},function(t,e){t.exports=function(t){var e='<div id="J_logoDoodle" class="doodle air-doodle clearfix"> <a class="link-block" href="'+t.adData.url+'" data-stat-aid="'+t.adData.channel_alias+t.adData.adv_id+'" data-stat-pid="'+t.adData.channel_group_id+"_"+t.adData.area_id+"_1_"+t.adData.space_id+'" target="_blank"> <span class="doodle-img" style="background: url('+t.adData.image+') no-repeat 50% 50%"></span> <span class="doodle-state">'+t.adData.desc+'</span> <span class="doodle-info"> <span class="city">'+t.ipAddr[1]+'市</span> <span class="pm">PM2.5 : '+t.aqi.pm25+"</span> </span> </a></div>";return e}}]);